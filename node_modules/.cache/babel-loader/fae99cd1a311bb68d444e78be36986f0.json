{"ast":null,"code":"import _defineProperty from \"/Users/semeongetachew/Desktop/react-udemy-vintage-tech-extra-fetures/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/semeongetachew/Desktop/react-udemy-vintage-tech-extra-fetures/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/semeongetachew/Desktop/react-udemy-vintage-tech-extra-fetures/src/context/products.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from \"react\";\nimport axios from \"axios\";\nimport url from \"../utils/URL\";\nimport { featuredProducts, flattenProducts, paginate } from \"../utils/helpers\";\nexport const ProductContext = React.createContext();\nexport default function ProductProvider({\n  children\n}) {\n  const _React$useState = React.useState(false),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        loading = _React$useState2[0],\n        setLoading = _React$useState2[1];\n\n  const _React$useState3 = React.useState([]),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        products = _React$useState4[0],\n        setProducts = _React$useState4[1];\n\n  const _React$useState5 = React.useState([]),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        featured = _React$useState6[0],\n        setFeatured = _React$useState6[1]; // extra state values\n\n\n  const _React$useState7 = React.useState([]),\n        _React$useState8 = _slicedToArray(_React$useState7, 2),\n        sorted = _React$useState8[0],\n        setSorted = _React$useState8[1];\n\n  const _React$useState9 = React.useState(0),\n        _React$useState10 = _slicedToArray(_React$useState9, 2),\n        page = _React$useState10[0],\n        setPage = _React$useState10[1];\n\n  const _React$useState11 = React.useState({\n    search: \"\",\n    category: \"all\",\n    shipping: false,\n    price: \"all\"\n  }),\n        _React$useState12 = _slicedToArray(_React$useState11, 2),\n        filters = _React$useState12[0],\n        setFilters = _React$useState12[1];\n\n  const changePage = index => {\n    setPage(index);\n  };\n\n  const updateFilters = e => {\n    const type = e.target.type;\n    const filter = e.target.name;\n    const value = e.target.value;\n    let filterValue;\n\n    if (type === \"checkbox\") {\n      filterValue = e.target.checked;\n    } else if (type === \"radio\") {\n      value === \"all\" ? filterValue = value : filterValue = parseInt(value);\n    } else {\n      filterValue = value;\n    }\n\n    setFilters(_objectSpread({}, filters, {\n      [filter]: filterValue\n    }));\n  };\n\n  React.useEffect(() => {\n    setLoading(true);\n    axios.get(\"\".concat(url, \"/products\")).then(response => {\n      const featured = featuredProducts(flattenProducts(response.data));\n      const products = flattenProducts(response.data);\n      setProducts(products);\n      setSorted(paginate(products));\n      setFeatured(featured);\n      setLoading(false);\n    });\n    return () => {};\n  }, []);\n  React.useLayoutEffect(() => {\n    let newProducts = [...products].sort((a, b) => a.price - b.price);\n    const search = filters.search,\n          category = filters.category,\n          shipping = filters.shipping,\n          price = filters.price; //\n\n    if (category !== \"all\") {\n      newProducts = newProducts.filter(item => item.category === category);\n    }\n\n    if (shipping !== false) {\n      newProducts = newProducts.filter(item => item.free_shipping === shipping);\n    }\n\n    if (price !== \"all\") {\n      newProducts = newProducts.filter(item => {\n        if (price === 0) {\n          return item.price < 300;\n        } else if (price === 300) {\n          return item.price > 300 && item.price < 650;\n        } else {\n          return item.price > 650;\n        }\n      });\n    }\n\n    if (search !== \"\") {\n      newProducts = newProducts.filter(item => {\n        let title = item.title.toLowerCase().trim();\n        return title.startsWith(search) ? item : null;\n      });\n    }\n\n    setPage(0);\n    setSorted(paginate(newProducts));\n  }, [filters, products]);\n  return React.createElement(ProductContext.Provider, {\n    value: {\n      products,\n      loading,\n      featured,\n      sorted,\n      page,\n      changePage,\n      filters,\n      updateFilters\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, children);\n}","map":{"version":3,"sources":["/Users/semeongetachew/Desktop/react-udemy-vintage-tech-extra-fetures/src/context/products.js"],"names":["React","axios","url","featuredProducts","flattenProducts","paginate","ProductContext","createContext","ProductProvider","children","useState","loading","setLoading","products","setProducts","featured","setFeatured","sorted","setSorted","page","setPage","search","category","shipping","price","filters","setFilters","changePage","index","updateFilters","e","type","target","filter","name","value","filterValue","checked","parseInt","useEffect","get","then","response","data","useLayoutEffect","newProducts","sort","a","b","item","free_shipping","title","toLowerCase","trim","startsWith"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport url from \"../utils/URL\";\nimport { featuredProducts, flattenProducts, paginate } from \"../utils/helpers\";\nexport const ProductContext = React.createContext();\n\nexport default function ProductProvider({ children }) {\n  const [loading, setLoading] = React.useState(false);\n  const [products, setProducts] = React.useState([]);\n  const [featured, setFeatured] = React.useState([]);\n  // extra state values\n  const [sorted, setSorted] = React.useState([]);\n  const [page, setPage] = React.useState(0);\n  const [filters, setFilters] = React.useState({\n    search: \"\",\n    category: \"all\",\n    shipping: false,\n    price: \"all\"\n  });\n  const changePage = index => {\n    setPage(index);\n  };\n  const updateFilters = e => {\n    const type = e.target.type;\n    const filter = e.target.name;\n    const value = e.target.value;\n    let filterValue;\n    if (type === \"checkbox\") {\n      filterValue = e.target.checked;\n    } else if (type === \"radio\") {\n      value === \"all\" ? (filterValue = value) : (filterValue = parseInt(value));\n    } else {\n      filterValue = value;\n    }\n    setFilters({ ...filters, [filter]: filterValue });\n  };\n\n  React.useEffect(() => {\n    setLoading(true);\n    axios.get(`${url}/products`).then(response => {\n      const featured = featuredProducts(flattenProducts(response.data));\n      const products = flattenProducts(response.data);\n      setProducts(products);\n      setSorted(paginate(products));\n      setFeatured(featured);\n      setLoading(false);\n    });\n    return () => {};\n  }, []);\n  React.useLayoutEffect(() => {\n    let newProducts = [...products].sort((a, b) => a.price - b.price);\n    const { search, category, shipping, price } = filters;\n    //\n    if (category !== \"all\") {\n      newProducts = newProducts.filter(item => item.category === category);\n    }\n    if (shipping !== false) {\n      newProducts = newProducts.filter(item => item.free_shipping === shipping);\n    }\n    if (price !== \"all\") {\n      newProducts = newProducts.filter(item => {\n        if (price === 0) {\n          return item.price < 300;\n        } else if (price === 300) {\n          return item.price > 300 && item.price < 650;\n        } else {\n          return item.price > 650;\n        }\n      });\n    }\n    if (search !== \"\") {\n      newProducts = newProducts.filter(item => {\n        let title = item.title.toLowerCase().trim();\n        return title.startsWith(search) ? item : null;\n      });\n    }\n\n    setPage(0);\n\n    setSorted(paginate(newProducts));\n  }, [filters, products]);\n  return (\n    <ProductContext.Provider\n      value={{\n        products,\n        loading,\n        featured,\n        sorted,\n        page,\n        changePage,\n        filters,\n        updateFilters\n      }}\n    >\n      {children}\n    </ProductContext.Provider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}