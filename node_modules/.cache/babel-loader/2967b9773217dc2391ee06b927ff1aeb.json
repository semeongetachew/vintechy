{"ast":null,"code":"import _slicedToArray from \"/Users/semeongetachew/Desktop/react-udemy-vintage-tech-extra-fetures/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/semeongetachew/Desktop/react-udemy-vintage-tech-extra-fetures/src/context/cart.js\";\nimport React from \"react\"; // import localCart from \"../utils/localCart\";\n\nimport reducer from \"./reducer\";\nimport { REMOVE, INCREASE, DECREASE, ADD_TO_CART, CLEAR_CART } from \"./actions\";\n\nfunction getCartFromLocalStorage() {\n  return localStorage.getItem(\"cart\") ? JSON.parse(localStorage.getItem(\"cart\")) : [];\n}\n\nconst CartContext = React.createContext();\n\nfunction CartProvider({\n  children\n}) {\n  const _React$useReducer = React.useReducer(reducer, getCartFromLocalStorage()),\n        _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n        cart = _React$useReducer2[0],\n        dispatch = _React$useReducer2[1];\n\n  const _React$useState = React.useState(0),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        total = _React$useState2[0],\n        setTotal = _React$useState2[1];\n\n  const _React$useState3 = React.useState(0),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        cartItems = _React$useState4[0],\n        setCartItems = _React$useState4[1];\n\n  React.useEffect(() => {\n    // local storage\n    localStorage.setItem(\"cart\", JSON.stringify(cart)); // cart items\n\n    let newCartItems = cart.reduce((total, cartItem) => {\n      return total += cartItem.amount;\n    }, 0);\n    setCartItems(newCartItems); // cart total\n\n    let newTotal = cart.reduce((total, cartItem) => {\n      return total += cartItem.amount * cartItem.price;\n    }, 0);\n    newTotal = parseFloat(newTotal.toFixed(2));\n    setTotal(newTotal);\n  }, [cart]); // remove item\n\n  const removeItem = id => {\n    dispatch({\n      type: REMOVE,\n      payload: id\n    });\n  }; // increase amount\n\n\n  const increaseAmount = id => {\n    dispatch({\n      type: INCREASE,\n      payload: id\n    });\n  }; // decrease amount\n\n\n  const decreaseAmount = (id, amount) => {\n    if (amount === 1) {\n      dispatch({\n        type: REMOVE,\n        payload: id\n      });\n      return;\n    } else {\n      dispatch({\n        type: DECREASE,\n        payload: id\n      });\n    }\n  }; // add to cart\n\n\n  const addToCart = product => {\n    let item = [...cart].find(item => item.id === product.id);\n\n    if (item) {\n      dispatch({\n        type: INCREASE,\n        payload: product.id\n      });\n    } else {\n      dispatch({\n        type: ADD_TO_CART,\n        payload: product\n      });\n    }\n  }; // clear cart\n\n\n  const clearCart = () => {\n    dispatch({\n      type: CLEAR_CART\n    });\n  };\n\n  return React.createElement(CartContext.Provider, {\n    value: {\n      cart,\n      total,\n      cartItems,\n      removeItem,\n      increaseAmount,\n      decreaseAmount,\n      addToCart,\n      clearCart\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, children);\n}\n\nexport { CartContext, CartProvider };","map":{"version":3,"sources":["/Users/semeongetachew/Desktop/react-udemy-vintage-tech-extra-fetures/src/context/cart.js"],"names":["React","reducer","REMOVE","INCREASE","DECREASE","ADD_TO_CART","CLEAR_CART","getCartFromLocalStorage","localStorage","getItem","JSON","parse","CartContext","createContext","CartProvider","children","useReducer","cart","dispatch","useState","total","setTotal","cartItems","setCartItems","useEffect","setItem","stringify","newCartItems","reduce","cartItem","amount","newTotal","price","parseFloat","toFixed","removeItem","id","type","payload","increaseAmount","decreaseAmount","addToCart","product","item","find","clearCart"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,MAAT,EAAiBC,QAAjB,EAA2BC,QAA3B,EAAqCC,WAArC,EAAkDC,UAAlD,QAAoE,WAApE;;AACA,SAASC,uBAAT,GAAmC;AACjC,SAAOC,YAAY,CAACC,OAAb,CAAqB,MAArB,IACHC,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CADG,GAEH,EAFJ;AAGD;;AAED,MAAMG,WAAW,GAAGZ,KAAK,CAACa,aAAN,EAApB;;AAEA,SAASC,YAAT,CAAsB;AAAEC,EAAAA;AAAF,CAAtB,EAAoC;AAAA,4BACTf,KAAK,CAACgB,UAAN,CAAiBf,OAAjB,EAA0BM,uBAAuB,EAAjD,CADS;AAAA;AAAA,QAC3BU,IAD2B;AAAA,QACrBC,QADqB;;AAAA,0BAERlB,KAAK,CAACmB,QAAN,CAAe,CAAf,CAFQ;AAAA;AAAA,QAE3BC,KAF2B;AAAA,QAEpBC,QAFoB;;AAAA,2BAGArB,KAAK,CAACmB,QAAN,CAAe,CAAf,CAHA;AAAA;AAAA,QAG3BG,SAH2B;AAAA,QAGhBC,YAHgB;;AAKlCvB,EAAAA,KAAK,CAACwB,SAAN,CAAgB,MAAM;AACpB;AACAhB,IAAAA,YAAY,CAACiB,OAAb,CAAqB,MAArB,EAA6Bf,IAAI,CAACgB,SAAL,CAAeT,IAAf,CAA7B,EAFoB,CAGpB;;AACA,QAAIU,YAAY,GAAGV,IAAI,CAACW,MAAL,CAAY,CAACR,KAAD,EAAQS,QAAR,KAAqB;AAClD,aAAQT,KAAK,IAAIS,QAAQ,CAACC,MAA1B;AACD,KAFkB,EAEhB,CAFgB,CAAnB;AAGAP,IAAAA,YAAY,CAACI,YAAD,CAAZ,CAPoB,CAQpB;;AACA,QAAII,QAAQ,GAAGd,IAAI,CAACW,MAAL,CAAY,CAACR,KAAD,EAAQS,QAAR,KAAqB;AAC9C,aAAQT,KAAK,IAAIS,QAAQ,CAACC,MAAT,GAAkBD,QAAQ,CAACG,KAA5C;AACD,KAFc,EAEZ,CAFY,CAAf;AAGAD,IAAAA,QAAQ,GAAGE,UAAU,CAACF,QAAQ,CAACG,OAAT,CAAiB,CAAjB,CAAD,CAArB;AACAb,IAAAA,QAAQ,CAACU,QAAD,CAAR;AACD,GAdD,EAcG,CAACd,IAAD,CAdH,EALkC,CAqBlC;;AACA,QAAMkB,UAAU,GAAGC,EAAE,IAAI;AACvBlB,IAAAA,QAAQ,CAAC;AAAEmB,MAAAA,IAAI,EAAEnC,MAAR;AAAgBoC,MAAAA,OAAO,EAAEF;AAAzB,KAAD,CAAR;AACD,GAFD,CAtBkC,CAyBlC;;;AACA,QAAMG,cAAc,GAAGH,EAAE,IAAI;AAC3BlB,IAAAA,QAAQ,CAAC;AAAEmB,MAAAA,IAAI,EAAElC,QAAR;AAAkBmC,MAAAA,OAAO,EAAEF;AAA3B,KAAD,CAAR;AACD,GAFD,CA1BkC,CA6BlC;;;AACA,QAAMI,cAAc,GAAG,CAACJ,EAAD,EAAKN,MAAL,KAAgB;AACrC,QAAIA,MAAM,KAAK,CAAf,EAAkB;AAChBZ,MAAAA,QAAQ,CAAC;AAAEmB,QAAAA,IAAI,EAAEnC,MAAR;AAAgBoC,QAAAA,OAAO,EAAEF;AAAzB,OAAD,CAAR;AACA;AACD,KAHD,MAGO;AACLlB,MAAAA,QAAQ,CAAC;AAAEmB,QAAAA,IAAI,EAAEjC,QAAR;AAAkBkC,QAAAA,OAAO,EAAEF;AAA3B,OAAD,CAAR;AACD;AACF,GAPD,CA9BkC,CAsClC;;;AACA,QAAMK,SAAS,GAAGC,OAAO,IAAI;AAC3B,QAAIC,IAAI,GAAG,CAAC,GAAG1B,IAAJ,EAAU2B,IAAV,CAAeD,IAAI,IAAIA,IAAI,CAACP,EAAL,KAAYM,OAAO,CAACN,EAA3C,CAAX;;AACA,QAAIO,IAAJ,EAAU;AACRzB,MAAAA,QAAQ,CAAC;AAAEmB,QAAAA,IAAI,EAAElC,QAAR;AAAkBmC,QAAAA,OAAO,EAAEI,OAAO,CAACN;AAAnC,OAAD,CAAR;AACD,KAFD,MAEO;AACLlB,MAAAA,QAAQ,CAAC;AAAEmB,QAAAA,IAAI,EAAEhC,WAAR;AAAqBiC,QAAAA,OAAO,EAAEI;AAA9B,OAAD,CAAR;AACD;AACF,GAPD,CAvCkC,CA+ClC;;;AACA,QAAMG,SAAS,GAAG,MAAM;AACtB3B,IAAAA,QAAQ,CAAC;AAAEmB,MAAAA,IAAI,EAAE/B;AAAR,KAAD,CAAR;AACD,GAFD;;AAIA,SACE,oBAAC,WAAD,CAAa,QAAb;AACE,IAAA,KAAK,EAAE;AACLW,MAAAA,IADK;AAELG,MAAAA,KAFK;AAGLE,MAAAA,SAHK;AAILa,MAAAA,UAJK;AAKLI,MAAAA,cALK;AAMLC,MAAAA,cANK;AAOLC,MAAAA,SAPK;AAQLI,MAAAA;AARK,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAYG9B,QAZH,CADF;AAgBD;;AAED,SAASH,WAAT,EAAsBE,YAAtB","sourcesContent":["import React from \"react\";\n// import localCart from \"../utils/localCart\";\nimport reducer from \"./reducer\";\nimport { REMOVE, INCREASE, DECREASE, ADD_TO_CART, CLEAR_CART } from \"./actions\";\nfunction getCartFromLocalStorage() {\n  return localStorage.getItem(\"cart\")\n    ? JSON.parse(localStorage.getItem(\"cart\"))\n    : [];\n}\n\nconst CartContext = React.createContext();\n\nfunction CartProvider({ children }) {\n  const [cart, dispatch] = React.useReducer(reducer, getCartFromLocalStorage());\n  const [total, setTotal] = React.useState(0);\n  const [cartItems, setCartItems] = React.useState(0);\n\n  React.useEffect(() => {\n    // local storage\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    // cart items\n    let newCartItems = cart.reduce((total, cartItem) => {\n      return (total += cartItem.amount);\n    }, 0);\n    setCartItems(newCartItems);\n    // cart total\n    let newTotal = cart.reduce((total, cartItem) => {\n      return (total += cartItem.amount * cartItem.price);\n    }, 0);\n    newTotal = parseFloat(newTotal.toFixed(2));\n    setTotal(newTotal);\n  }, [cart]);\n\n  // remove item\n  const removeItem = id => {\n    dispatch({ type: REMOVE, payload: id });\n  };\n  // increase amount\n  const increaseAmount = id => {\n    dispatch({ type: INCREASE, payload: id });\n  };\n  // decrease amount\n  const decreaseAmount = (id, amount) => {\n    if (amount === 1) {\n      dispatch({ type: REMOVE, payload: id });\n      return;\n    } else {\n      dispatch({ type: DECREASE, payload: id });\n    }\n  };\n  // add to cart\n  const addToCart = product => {\n    let item = [...cart].find(item => item.id === product.id);\n    if (item) {\n      dispatch({ type: INCREASE, payload: product.id });\n    } else {\n      dispatch({ type: ADD_TO_CART, payload: product });\n    }\n  };\n  // clear cart\n  const clearCart = () => {\n    dispatch({ type: CLEAR_CART });\n  };\n\n  return (\n    <CartContext.Provider\n      value={{\n        cart,\n        total,\n        cartItems,\n        removeItem,\n        increaseAmount,\n        decreaseAmount,\n        addToCart,\n        clearCart\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n}\n\nexport { CartContext, CartProvider };\n"]},"metadata":{},"sourceType":"module"}